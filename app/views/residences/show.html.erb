<div class="panel">
	<ul class="infosClient">
		<li><b>CEP:</b> <%= @residence.cep %></li>
		<li><b>POS:</b> <%= @residence.position %></li>
	</ul>
</div>

<div style='width: 800px;'>
  <div id="basic_map" style='width: 800px; height: 400px;'></div>
</div>
<script>

var handler = Gmaps.build('Google');
handler.buildMap({ internal: {id: 'basic_map'} }, function(){
  
  var markers = handler.addMarkers([
    { lat:  "<%= @residence.position[0] %>", lng: "<%= @residence.position[1] %>"},
  ]);

  if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(displayOnMap);}
  handler.bounds.extendWith(markers);
  handler.fitMapToBounds();  

});
/*
function displayOnMap(position){
  var marker = handler.addMarker({
    lat: "<%= @residence.position[0] %>",
    lng: "<%= @residence.position[1] %>",
    picture: {
        url: "https://addons.cdn.mozilla.net/img/uploads/addon_icons/13/13028-64.png",
        width:  36,
        height: 36
      },
      infowindow: "hello!"
  });
  handler.map.centerOn(marker);
  handler.getMap().setZoom(15);
};
*/
</script>